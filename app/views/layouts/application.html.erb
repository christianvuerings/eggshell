<!DOCTYPE html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7 ]> <html class="ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8" />

  <!-- Set the viewport width to device width for mobile -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title><%= content_for?(:title) ? yield(:title) : "CalCentral: Pilot Release" %></title>

  <meta name="description" content="CalCentral is a new resource for the UC Berkeley community.">

  <link rel="icon" href="<%= asset_path 'favicon.png' %>" type="image/png">

  <link rel="shortcut icon" href="<%= asset_path 'favicon.ico' %>">

  <!-- Included CSS Files -->
  <%= stylesheet_link_tag "application" %>

  <!-- Included JS Files  -->
  <%= javascript_include_tag "application" %>

  <%= csrf_meta_tags %>
</head>

<body class="<%= @bodyclass %>">
  <% flash.each do |name, msg| %>
    <% if msg.is_a?(String) %>
      <%= content_tag :div, msg, :id => "flash_#{name}" %>
    <% end %>
  <% end %>

    <header class="row">
        <h1>Calcentral</h1>
        <nav class="cc-launcher cc-right">

          <% if user_signed_in? %>
              <div class="cc-left cc-launcher-icons">
                  <a href="http://bmail.berkeley.edu" class="ir cc-left cc-icon cc-icon-mail" title="bMail">bMail</a>
                  <a href="http://bcal.berkeley.edu" class="ir cc-left cc-icon cc-icon-calendar" title="bCal">bCal</a>
                  <a href="https://drive.google.com/a/berkeley.edu/" class="ir cc-left cc-icon cc-icon-drive" title="bDrive">bDrive</a>
              </div>
              <a href="<%= dashboard_path %>" class="cc-launcher-info cc-right" aria-haspopup="true">Scot Hacker <span class="cc-launcher-icon-dropdown">&#x25BC;<span></a>
              <div class="cc-launcher-dropdown">
                  <ul>
                      <li>
                          <a href="/secure/preferences">Preferences</a>
                      </li>
                      <li>
                          <a href="/secure/profile">Profile</a>
                      </li>
                      <li>
                        <% if user_signed_in? %>
                          <%= link_to "Sign out", logout_path -%>
                        <% else %>
                          <%= link_to "Sign in", login_path -%>
                        <% end %>
                      </li>
                  </ul>
              </div>
          <% else %>
              <a href="<%= dashboard_path %>" class="cc-launcher-info cc-right">Sign in</a>
          <% end %>
        </nav>
    </header>

    <nav class="cc-topnavigation">
      <ul class="cc-topnavigation-primary">
          <li class="cc-left"><a href="<%= dashboard_path %>">My Dashboard</a></li>
          <li class="cc-left"><a href="/secure/campus">My Campus</a></li>
          <ul>
              <li class="cc-right">
                  <form data-notreal="standard">
                      <input class="cc-input-search" type="text" placeholder="Search...">
                  </form>
              </li>
          </ul>
      </ul>
    </nav>

    <ul class="cc-topnavigation-primary">
      <!-- TODO : Mystery box - layout breaks without it -->
    </ul>

    <%= yield %>

    <footer>
      <div class="cc-left">Copyright Â© 2012 The Regents of the University of California</div>
      <a href="#">Help</a>
      <a href="http://ets.berkeley.edu/calcentral-feedback">Feedback</a>
    </footer>

    <% if user_signed_in? %>
      <%= link_to "Sign out", logout_path, :class => 'radius button' -%>
    <% else %>
      <%= link_to "Sign in", login_path, :class => 'radius button' -%>
    <% end %>


    <script>
      var calcentral = calcentral || {};
      <% if user_signed_in? %>
      (function() {
        calcentral.Data = calcentral.Data || {};
        calcentral.Data.User = calcentral.Data.User || {};
        calcentral.Data.User.user = calcentral.Data.User.user || {};
        calcentral.Data.User.user.uid = <%= current_user %>
      })();
      <% end %>
    </script>

    <script>
        var calcentral = calcentral || {};
        (function() {
            calcentral.Data = calcentral.Data || {};
            calcentral.Data.User = {};
            calcentral.Data.Env = {"canvasRoot":"https://ucberkeley.instructure.com"};
        })();
    </script>

    <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/js/libs/jquery-1.8.2.min.js"><\/script>')</script>

  </body>
</html>
